
{
  "entities": {
    "Kpi": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Kpi",
      "type": "object",
      "description": "Represents a Key Performance Indicator.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the KPI."
        },
        "name": {
          "type": "string",
          "description": "Name of the KPI."
        },
        "category": {
          "type": "string",
          "description": "Category of the KPI (e.g., financial, operational, ESG, customer)."
        },
        "departmentId": {
          "type": "string",
          "description": "Reference to Department. (Relationship: Department 1:N Kpi)"
        },
        "level": {
          "type": "string",
          "description": "Level of the KPI (corporate, department, individual)."
        },
        "priority": {
          "type": "string",
          "description": "Priority of the KPI (high, normal, low)."
        },
        "targetValue": {
          "type": "number",
          "description": "Target value for the KPI."
        },
        "actualValue": {
          "type": "number",
          "description": "Actual value achieved for the KPI."
        },
        "unit": {
          "type": "string",
          "description": "Unit of measurement for the KPI (e.g., THB, %, Count)."
        },
        "period": {
          "type": "string",
          "description": "Time period for the KPI (monthly, quarterly, yearly)."
        },
        "ownerId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Kpi)"
        },
        "submissionId": {
          "type": "string",
          "description": "Reference to Submission. (Relationship: Submission 1:N Kpi)"
        }
      },
      "required": [
        "id",
        "name",
        "category",
        "departmentId",
        "level",
        "priority",
        "targetValue",
        "actualValue",
        "unit",
        "period",
        "ownerId",
        "submissionId"
      ]
    },
    "Department": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Department",
      "type": "object",
      "description": "Represents a department within the organization.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the department."
        },
        "name": {
          "type": "string",
          "description": "Name of the department (e.g., Sales, Operations, Corporate Affairs)."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user in the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "name": {
          "type": "string",
          "description": "Name of the user."
        },
        "departmentId": {
          "type": "string",
          "description": "Reference to Department. (Relationship: Department 1:N User)"
        },
        "title": {
          "type": "string",
          "description": "Job title of the user (e.g. CEO, Manager)."
        }
      },
      "required": [
        "id",
        "name",
        "departmentId",
        "title"
      ]
    },
    "Submission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Submission",
      "type": "object",
      "description": "Represents a KPI data submission.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the submission."
        },
        "submittedBy": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Submission)"
        },
        "submissionDate": {
          "type": "string",
          "description": "Date and time of the submission.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the submission (e.g., pending, approved, rejected, draft)."
        },
        "notes": {
          "type": "string",
          "description": "Additional notes or comments about the submission."
        }
      },
      "required": [
        "id",
        "submittedBy",
        "submissionDate",
        "status"
      ]
    },
    "KpiCatalog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "KpiCatalog",
      "type": "object",
      "description": "Represents a KPI in the catalog.",
      "properties": {
        "id": { "type": "string" },
        "perspective": { "type": "string" },
        "strategic_objective": { "type": "string" },
        "measure": { "type": "string" },
        "target": { "type": "string" },
        "unit": { "type": "string" },
        "category": { "type": "string" }
      },
      "required": ["id", "measure", "target"]
    },
    "Employee": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Employee",
      "type": "object",
      "description": "Represents an employee in the organization.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "department": { "type": "string" },
        "position": { "type": "string" },
        "manager": { "type": "string" }
      },
      "required": ["id", "name", "department", "position"]
    },
    "AppSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AppSettings",
      "type": "object",
      "description": "Stores global application settings.",
      "properties": {
        "orgName": { "type": "string" },
        "period": { "type": "string" },
        "currency": { "type": "string" },
        "periodDate": { "type": "string", "format": "date-time" }
      }
    },
    "CascadedKpi": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CascadedKpi",
      "type": "object",
      "description": "Represents a corporate KPI cascaded to a department.",
      "properties": {
        "corporateKpiId": { "type": "string" },
        "measure": { "type": "string" },
        "department": { "type": "string" },
        "weight": { "type": "number" },
        "departmentTarget": { "type": "string" }
      }
    },
    "IndividualKpi": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "IndividualKpi",
      "type": "object",
      "description": "Represents a KPI assigned to an individual.",
      "properties": {
        "employeeId": { "type": "string" },
        "kpiId": { "type": "string" },
        "kpiMeasure": { "type": "string" },
        "weight": { "type": "number" },
        "type": { "type": "string", "enum": ["cascaded", "committed"] },
        "target": { "type": "string" },
        "task": { "type": "string" },
        "targets": {
          "type": "object",
          "properties": {
            "level1": { "type": "string" },
            "level2": { "type": "string" },
            "level3": { "type": "string" },
            "level4": { "type": "string" },
            "level5": { "type": "string" }
          }
        }
      }
    }
  },
  "auth": {
    "providers": [
      "password"
    ],
    "customClaims": {
      "role": {
        "type": "string",
        "enum": ["Admin", "VP", "AVP", "Manager", "Employee"]
      }
    }
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/entities/User"
          },
          "description": "Stores user profiles. Only an Admin can list all users. A user can read/write their own profile."
        }
      },
      {
        "path": "/departments/{departmentId}",
        "definition": {
          "entityName": "Department",
          "schema": {
            "$ref": "#/entities/Department"
          },
          "description": "Stores department information."
        }
      },
      {
        "path": "/kpis/{kpiId}",
        "definition": {
          "entityName": "Kpi",
          "schema": {
            "$ref": "#/entities/Kpi"
          },
          "description": "Stores KPI data. Includes denormalized 'ownerId' for authorization independence."
        }
      },
      {
        "path": "/submissions/{submissionId}",
        "definition": {
          "entityName": "Submission",
          "schema": {
            "$ref": "#/entities/Submission"
          },
          "description": "Stores KPI submission data."
        }
      },
      {
        "path": "/kpi_catalog/{kpiId}",
        "definition": {
          "entityName": "KpiCatalog",
          "schema": {
            "$ref": "#/entities/KpiCatalog"
          },
          "description": "Stores the catalog of all corporate KPIs available for cascading."
        }
      },
      {
        "path": "/employees/{employeeId}",
        "definition": {
          "entityName": "Employee",
          "schema": {
            "$ref": "#/entities/Employee"
          },
          "description": "Stores employee and organizational structure data."
        }
      },
       {
        "path": "/settings/global",
        "definition": {
          "entityName": "AppSettings",
          "schema": {
            "$ref": "#/entities/AppSettings"
          },
          "description": "Stores global application settings in a singleton document."
        }
      },
      {
        "path": "/cascaded_kpis/{cascadedKpiId}",
        "definition": {
          "entityName": "CascadedKpi",
          "schema": {
            "$ref": "#/entities/CascadedKpi"
          },
          "description": "Stores corporate KPIs cascaded to departments."
        }
      },
      {
        "path": "/individual_kpis/{individualKpiId}",
        "definition": {
          "entityName": "IndividualKpi",
          "schema": {
            "$ref": "#/entities/IndividualKpi"
          },
          "description": "Stores KPIs assigned to individuals."
        }
      }
    ]
  }
}

    